# CLAUDE.md

Этот файл предоставляет руководство для Claude Code (claude.ai/code) при работе с кодом в этом репозитории.

## Обзор проекта

AI Pages - это коллекция интерактивных веб-приложений и инструментов, представленных как витрина одностраничных
приложений. Проект состоит из:

- **Главная страница** (`index.html`) - категоризированная витрина всех интерактивных примеров
- **Индивидуальные HTML-приложения** - самодостаточные интерактивные демо, включая игры, визуализации и инструменты
- **Набор тестов** - комплексное покрытие тестами Playwright и pytest

## Архитектура

### Одностраничные приложения

Каждый HTML-файл представляет собой полное, самодостаточное приложение с встроенными CSS и JavaScript. Внешние
зависимости или процессы сборки не требуются - все приложения могут работать напрямую при открытии HTML-файлов в
браузере.

Ключевые характеристики:

- Встроенные технические требования в HTML-комментариях в верхней части файла
- Самодостаточные стили и JavaScript внутри каждого файла
- Отсутствие зависимостей от внешних фреймворков (используется vanilla JavaScript)
- 3D-приложения используют Three.js и Cannon.js, загружаемые через CDN

### Структура главной страницы

`index.html` служит витриной с:

- Карточной разметкой для каждого приложения
- Многоязычной поддержкой (русский/английский) с сохранением в localStorage
- Переключением темной/светлой темы
- Функционалом поиска по всем карточкам
- Категориями: Игры, Визуализации, Инструменты, Обработка данных
- Адаптивным дизайном для мобильных/настольных устройств

### Архитектура тестирования

- **Playwright тесты** (`test_js/`) - Frontend E2E тесты для главной страницы
- **Pytest тесты** (`tests/`) - Python-тесты с использованием async Playwright
- Паттерн Page Object Model реализован в `tests/pages/main_page.py`

## Основные команды разработки

### Запуск тестов

```bash
# Запуск всех Playwright тестов
npm test

# Запуск Python тестов
pytest

# Запуск конкретного тестового файла
npx playwright test test_js/playwright-search.spec.js

# Запуск тестов в режиме с интерфейсом браузера
npx playwright test --headed
```

### Сервер разработки

Используйте любой локальный HTTP-сервер для обслуживания файлов:

```bash
# Встроенный сервер Python
python -m http.server 8000

# Node.js http-server (если установлен)
http-server

# Расширение Live Server в VS Code рекомендуется
```

## Стиль кода и стандарты

### Стандарты кодирования (см. docs/ARCHITECTURE.md)

- **Отступы**: 2 пробела
- **Кавычки**: Двойные кавычки для JavaScript/HTML и Python
- **HTML**: Максимальная длина строки 100 символов, сохранение переносов строк
- **Комментарии**: Обязательны для функций, классов, методов и сложной логики
- **Русские комментарии**: В Python коде комментарии пишутся на русском языке

### Шаблоны комментариев

Функции должны включать комментарии в стиле JSDoc:

```javascript
/**
 * @function functionName
 * @description Краткое описание
 * @param {type} param - Описание параметра
 * @returns {type} Описание возвращаемого значения
 */
```

### Структура HTML

- Технические требования должны быть документированы в HTML-комментариях в верхней части файла
- Самодостаточные приложения (встроенные CSS и JS)
- Семантическая HTML-структура для доступности
- Использование Font Awesome для иконок
- Для переключателей (темная тема, языки) используй toggle-switch с классом slider как в index.html
- Для настроек используй структуру settings-option с label и toggle-switch

## Технологический стек по категориям

### Игры

- Canvas API для 2D-рендеринга
- Vanilla JavaScript для игровой логики
- Обнаружение коллизий и игровая физика
- Примеры: Змейка, Тетрис, Арканоид, Сапёр, Морской бой

### 3D Визуализации

- Three.js для 3D-рендеринга и управления сценой
- Cannon.js для физической симуляции
- WebGL для графики с GPU-ускорением
- Примеры: Физическая демонстрация 3D шариков, Симуляция жидкости

### Обработка данных

- Web API для получения данных
- Локальное хранилище для постоянства
- Примеры: Парсер вакансий, Карты погоды

### Интерактивные инструменты

- PyScript/Gradio для выполнения Python в браузере
- Редакторы кода с подсветкой синтаксиса
- Обработка аудио с Web Audio API
- Примеры: Python редакторы, Музыкальные визуализаторы

## Конфигурация тестов

### Конфигурация Playwright

- Тесты ожидают сервер разработки на `http://127.0.0.1:5500`
- Тесты написаны на JavaScript с использованием `@playwright/test`
- Поддержка русского языка в описаниях тестов и утверждениях

### Python тесты

- Async Playwright с pytest
- Page Object Model в `tests/pages/main_page.py`
- Конфигурация тестов в `pytest.ini` с поддержкой asyncio

## Ключевые файлы

### Основные файлы

- `index.html` - Главная витринная страница со всеми приложениями
- `test_js/playwright-*.spec.js` - Frontend E2E тесты
- `tests/test_index_page_async.py` - Python-тесты страницы
- `tests/pages/main_page.py` - Page Object Model для главной страницы

### Документация

- `docs/PRD_AI_Pages.md` - Полное техническое задание проекта
- `docs/ARCHITECTURE.md` - Полная архитектурная документация (включает принципы, CI/CD, компоненты, деплой)
- `docs/INDEX.md` - Навигация по документации

## Заметки по разработке

- Все HTML-приложения готовы к продакшену и могут быть развернуты как статические файлы
- Процесс сборки не требуется - прямая совместимость с браузером
- localStorage используется для сохранения пользовательских предпочтений
- Реализация адаптивного дизайна для мобильной совместимости
- Соображения доступности встроены в семантическую HTML-структуру

описание в docs/prd.md docs/architecture.md задачи в docs/stories отчеты по задачам в docs/reports

Используется BMAD methodology для разработки и управления проектом. запускаем /bmad-master

Вся документация проекта и сообщения в чате на русском языке.

перед началом работы ознакомься с документацией проекта, особенно с [PRD](docs/PRD_AI_PAGES.md) и
[архитектурой](docs/ARCHITECTURE.md).

для работы с Jira используй инструменты MCP (mcp**mcp-atlassian**\*) для работы с Bitbucket используй инструменты MCP
(bitbucket) для проверки интерфейса используй MCP (playwright) используй /.aid индекс проекта для поиска информации
созданный ai distiller mcp

Для запуск Python используй python3

при разработке используй принципы SOLID, DRY, KISS, CLEAN CODE, CLEAN Architecture, YAGNI, DDD │

Если находишь проблему не нужно ее избегать а использовать все возможности для ее анализа и предложения решений

используй субагентов

будь deep think

## Правила разработки

### Управление временными файлами

При выполнении заданий:

1. **Тестовые скрипты**:
   - Если создаешь скрипты для проверки или тестирования (например, test*\*.py, check*\_.py, debug\_\_.py)
   - ОБЯЗАТЕЛЬНО удаляй их после выполнения задания
   - Исключение: скрипты в папке tests/ - это часть проекта

2. **Временные файлы**:
   - Удаляй созданные скриншоты (\*.png), если они не являются частью документации
   - Удаляй временные логи и отладочные файлы
   - Оставляй только файлы, которые являются частью решения задачи

## Интеграция с GitHub

Проект поддерживает интеграцию с Claude через GitHub Actions. Для использования:

1. Упомяните `@claude` в issue или pull request
2. Claude автоматически ответит с анализом или помощью


Примеры использования:

- `@claude помоги исправить ошибку в whisper-live.html`
- `@claude проверь безопасность этого кода`
- `@claude объясни, как работает эта функция`

### Контроль качества при выполнении задач

Во время выполнения задач, которые влияют на поведение пользователя системы, перед завершением ОБЯЗАТЕЛЬНО выполни:

1. **Критическое ревью**:
   - Запусти critical-solution-analyzer субагента для анализа решения
   - Исправь найденные критические ошибки
   - Проверь соответствие принципам SOLID, DRY, KISS, Clean Architecture

2. **Проверка качества кода**:
   - Запусти линтер (для Python: `python3 -m flake8` или `python3 -m pylint`)
   - Для TypeScript/JavaScript: `npm run lint` или `eslint`
   - Исправь все найденные ошибки линтинга

3. **Тестирование**:
   - Создай минимально необходимые тесты для новой функциональности
   - Запусти тесты и убедись, что они проходят
   - Для frontend: создай хотя бы snapshot или integration тесты

4. **Проверка интерфейса**:
   - Используй Playwright MCP для проверки UI изменений
   - Создай тест-сценарий, проверяющий основные пользовательские пути
   - Убедись, что интерфейс работает корректно
   - Удали временные тестовые файлы после проверки
